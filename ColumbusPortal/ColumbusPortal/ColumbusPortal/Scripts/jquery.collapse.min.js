(function(n){function t(t,r){r=r||{};var u=this,f=r.query||"> :even";n.extend(u,{$el:t,options:r,sections:[],isAccordion:r.accordion||!1,db:r.persist?jQueryCollapseStorage(t[0].id):!1});u.states=u.db?u.db.read():[];u.$el.find(f).each(function(){var t=new i(n(this),u),r;u.sections.push(t);r=u.states[t._index()];r===0&&t.$summary.removeClass("open");r===1&&t.$summary.addClass("open");t.$summary.hasClass("open")?t.open(!0):t.close(!0)}),function(t){u.$el.on("click","[data-collapse-summary]",n.proxy(u.handleClick,t))}(u)}function i(t,i){n.extend(this,{isOpen:!1,$summary:t.attr("data-collapse-summary","").wrapInner('<a href="#"/>'),$details:t.next(),options:i.options,parent:i})}t.prototype={handleClick:function(t){t.preventDefault();for(var i=this.sections,r=i.length;r--;)if(n.contains(i[r].$summary[0],t.target)){i[r].toggle();break}},open:function(t){if(isFinite(t))return this.sections[t].open();n.each(this.sections,function(){this.open()})},close:function(t){if(isFinite(t))return this.sections[t].close();n.each(this.sections,function(){this.close()})}};i.prototype={toggle:function(){this.isOpen?this.close():this.open()},close:function(n){this._changeState("close",n)},open:function(t){var i=this;i.options.accordion&&!t&&n.each(i.parent.sections,function(){this.close()});i._changeState("open",t)},_index:function(){return n.inArray(this,this.parent.sections)},_changeState:function(t,i){var r=this;r.isOpen=t=="open";n.isFunction(r.options[t])&&!i?r.options[t].apply(r.$details):r.isOpen?r.$details.show():r.$details.hide();r.$summary.removeClass("open close").addClass(t);r.$details.attr("aria-hidden",t=="close");r.parent.$el.trigger(t,r);r.parent.db&&r.parent.db.write(r._index(),r.isOpen)}};n.fn.extend({collapse:function(t,i){var r=i?n("body").find("[data-collapse]"):n(this);return r.each(function(){var r=i?{}:t,u=n(this).attr("data-collapse")||"";n.each(u.split(" "),function(n,t){t&&(r[t]=!0)});new jQueryCollapse(n(this),r)})}});n(function(){n.fn.collapse(!1,!0)});jQueryCollapse=t})(window.jQuery);